@using Microsoft.AspNetCore.Identity
@inject UserManager<Secretaria.FrontEnd.Identity.ApplicationUser> UserManager

@if (User.Identity.IsAuthenticated)
{
    var user = @UserManager.FindByNameAsync(User.Identity.Name).Result;
    var photoPath = "/images/" + (user.PathImagen ?? "noimage.jpg");
   
    <div class="nav-item dropdown">
        <a href="#" class="nav-link d-flex lh-1 text-reset p-0 mt-1" data-toggle="dropdown">
            <span class="avatar" style="background-image: url(@photoPath)"></span>
            <div class="d-none d-xl-block pl-2">
                <div>@user.NombreCompleto</div>
                <div class="mt-1 small text-muted">@user.UserName</div>
            </div>
        </a>
        <div class="dropdown-menu dropdown-menu-right">
             <form asp-controller="Administracion" asp-action="Logout" method="post">
                 <button type="submit" class="dropdown-item">Salir</button>
             </form>
        </div>
    </div>
}
else
{
    <li class="nav-item">
        <a class="nav-link text-dark" asp-area="" asp-controller="Administracion" asp-action="CrearUsuario">Crear Usuario</a>
    </li>
    <li class="nav-item">
        <a class="nav-link text-dark" asp-area="" asp-controller="Administracion" asp-action="Login">Login</a>
    </li>
}
